"use strict";define(["jquery","core/ajax","core/notification","core/modal_factory","core/modal_events","./customizer/utils","./customizer/global-site","./customizer/global-body","./customizer/global-colors","./customizer/global-heading","./customizer/global-buttons","./customizer/header-site-identity","./customizer/header-primary","./customizer/header-menu","./customizer/left-sidebar","./customizer/footer","./customizer/additional-settings","core/modal_save_cancel"],function(t,e,n,i,o,a,c,r,s,l,u,d,E,g,m,f,T){var p={SAVE_SETTINGS:function(t){return e.call([{methodname:"theme_remui_customizer_save_settings",args:{settings:t}}])[0]}},R={CUSTOMIZER:"#customizer",CONTROLS:"#customize-controls",MODE_TOGGLE:"#customize-controls .mode-toggle",WRAP:"#customizer-wrap",CLOSE_CUSTOMIZER:".customize-controls-close",CUSTMIZER_TOGGLE:".customizer-controls-toggle",COLOR_SETTING:".setting-type-color",PUBLISH:"#publish-settings",IFRAME:"#customizer-frame",MAIN_OVERLAY:"#main-overlay",PANEL_LINK:"[sidebar-panel-link]",PANEL_BACK:".customize-panel-back",PANEL:".sidebar-panel",PANEL_ID:"panel-id",PREVIOUS:"previous",CURRENT:"current",NEXT:"next",SETTINGS_RESET:"#reset-settings",INPUT_RESET:".input-reset",SELECT_RESET:".select-reset",CHECKBOX_RESET:".checkbox-reset",COLOR_RESET:".color-reset",TEXTAREA_RESET:".textarea-reset",HTMLEDITOR_RESET:".htmleditor-reset",HEADING_TOGGLE:".heading-toggle",RANGEINPUT:".form-range"};function S(){c.init(),r.init(),s.init(),l.init(),u.init(),d.init(),E.init(),g.init(),m.init(),f.init(),T.init(),t(document).trigger("edwiser.customizer.init")}function h(){c.apply(),r.apply(),s.apply(),l.apply(),u.apply(),d.apply(),E.apply(),g.apply(),m.apply(),f.apply(),T.apply(),t(document).trigger("edwiser.customizer.apply")}return{init:function(){1!=window["customizer-enabled"]&&(window["customizer-enabled"]=!0,t(document).ready(function(t){S(),t(R.IFRAME).on("load",function(){t(a.getDocument()).find("body").addClass("customizer-opened"),t(a.getDocument()).find(".customizer-editing-icon").closest("a").addClass("d-none").removeClass("d-flex"),t(a.getDocument()).find("#sidebar-setting").addClass("d-none"),t(document).trigger("remui-adjust-left-side");var e=this.contentWindow;setTimeout(function(){window.history.replaceState("pagechange",document.title,M.cfg.wwwroot+"/theme/remui/customizer.php?url="+encodeURI(e.location.href)),t(R.CLOSE_CUSTOMIZER).attr("href",e.location.href),h(),a.hideLoader(),e.onbeforeunload=function(){a.showLoader()}},10)}),t(R.SETTINGS_RESET).on("click",function(){i.create({title:M.util.get_string("reset","moodle"),body:M.util.get_string("reset-settings-description","theme_remui"),type:i.types.SAVE_CANCEL},t("#create")).done(function(e){e.show(),e.setSaveButtonText(M.util.get_string("yes","moodle")),e.getRoot().on(o.save,function(){t(R.MAIN_OVERLAY).removeClass("d-none"),p.SAVE_SETTINGS(JSON.stringify([])).done(function(t){location.reload()}).fail(function(e){n.exception(e),t(R.MAIN_OVERLAY).addClass("d-none")})})})}),t(R.PANEL_LINK).on("click",function(){t(R.PANEL+"#"+t(this).data(R.PANEL_ID)).addClass(R.CURRENT),t(this).closest(R.PANEL).removeClass(R.CURRENT)}),t(R.PANEL_BACK).on("click",function(){t(R.PANEL+":not("+R.PANEL+"#"+t(this).data(R.PANEL_ID)+")").removeClass(R.CURRENT),t(R.PANEL+"#"+t(this).data(R.PANEL_ID)).addClass(R.CURRENT)}),t(R.MODE_TOGGLE).on("click",function(){t(R.CUSTOMIZER).removeClass("mode-desktop mode-tablet mode-mobile").addClass("mode-".concat(t(this).data("mode")))}),t(R.CONTROLS).on("submit",function(t){return t.preventDefault(),!1}),t("\n                ".concat(R.CONTROLS,' input[type="text"],\n                ').concat(R.CONTROLS,' input[type="number"],\n                ').concat(R.CONTROLS,' input[type="checkbox"]\n                ').concat(R.CONTROLS," textarea,\n                ").concat(R.CONTROLS," select\n            ")).on("change",function(){t(R.CONTROLS).data("unsaved",!0)}),t("".concat(R.CONTROLS,' input[type="color"]')).on("color.changed",function(){t(R.CONTROLS).data("unsaved",!0)}),t(R.PUBLISH).on("click",function(){t(R.MAIN_OVERLAY).removeClass("d-none");var e=t(R.CONTROLS).serializeArray();e.forEach(function(n,i){t('[name="'.concat(n.name,'"]')).is(".site-colorpicker")&&(n.value=t('[name="'.concat(n.name,'"]')).spectrum("get").toString(),e[i]=n)}),p.SAVE_SETTINGS(JSON.stringify(e)).done(function(e){var n={type:i.types.ALERT};0==e.status?(n.title=M.util.get_string("error","theme_remui"),n.body=e.errors):(n.title=M.util.get_string("success","moodle"),n.body=e.message,t(R.CONTROLS).data("unsaved",!1)),i.create(n,t("#create")).done(function(e){e.show(),t(R.MAIN_OVERLAY).addClass("d-none")})}).fail(n.exception)}),t(R.CLOSE_CUSTOMIZER).on("click",function(e){return 0==t(R.CONTROLS).data("unsaved")||(e.preventDefault(),i.create({title:M.util.get_string("customizer-close-heading","theme_remui"),body:M.util.get_string("customizer-close-description","theme_remui"),type:i.types.SAVE_CANCEL},t("#create")).done(function(e){e.show(),e.setSaveButtonText(M.util.get_string("yes","moodle")),e.getRoot().on(o.save,function(){window.location=t(R.CLOSE_CUSTOMIZER).attr("href")})}),!0)}),t(R.CUSTMIZER_TOGGLE).on("click",function(){t("body").toggleClass("full-customizer")}),t(R.COLOR_RESET).on("click",function(){var e=t(this).data("default");t(this).next().find("input").spectrum("set",e),t(this).next().find("input").trigger("color.changed",e)}),t(R.CHECKBOX_RESET).on("click",function(){var e=t(this).data("default");t(this).next().find("input").prop("checked",t(this).next().find("input").val()==e),t(this).next().find("input").trigger("change").trigger("input")}),t(R.SELECT_RESET).on("click",function(){var e=t(this).data("default");t(this).next().find("select").val(e).trigger("input").trigger("change")}),t(R.INPUT_RESET).on("click",function(){var e=t(this).data("default");t(this).next().find("input").val(e).trigger("input").trigger("change")}),t(R.TEXTAREA_RESET).on("click",function(){var e=t(this).data("default");t(this).next().find("textarea").val(e).trigger("input").trigger("change")}),t(R.HTMLEDITOR_RESET).on("click",function(){var e=t(this).data("default"),n=t(this).next().find("textarea");t(this).next().find("#".concat(n.attr("id"),"editable")).html(e),n.val(e).trigger("input").trigger("change")}),t(R.HEADING_TOGGLE).on("click",function(){t(this).next().slideToggle("fast")}),t("body").on("input",R.RANGEINPUT,function(){var e=t(this).attr("id"),n=t(this).val();t("#".concat(e,"-range-value")).text(n)})}))}}});
//# sourceMappingURL=customizer.min.js.map
